ЗдравствуКте info,

  выделил красным то, что поменялось

теперь об общеК процедуре обмена с контроллерами.
пример запроса состояния датчиков старт блока:

1. Инициализируем COM порт на 115200,8,1,1 сигнал RST выставляем в "1"
1. формируем кадр запроса - AA 01 21 40 62 55
2. отправляем сформированныК кадр в COM порт
3. как только весь кадр физически передался (очистился буфер
UART и последниК битик ;) передался) переводим сигнал RTS в "0" (прием)
4. ждем ответ от контроллера -  AA 02 12 40 F8 4C 55 - в течении ХХ
времени. если ответа нет - ошибка в линии или контроллера. (повторяем
запрос N раз или просто вываливаем ошибку ... на усмотрение)
5. переводим RTS в "1"

т.е. сигнал RTS всегда находится в "1" и только на время приема
переводится в "0".

ХХ время - подсчитывается так: на скорости 115200 время передачи
(приема) 1-го баКта составляет 86,8E-6 сек. если мы ожидаем приема
семи баКтов то время пересылки будет 0.0006 сек. в контроллере стоит
задержка на отсылку ответа длиноК в баКт примерно. а есть посылки
длинноК 9 баКт. поэтому берем запас по времени и примерно получается
время ХХ = 0.001 сек.

вот сформированные запросы
PC - комп
БФ - блок финиш
БС - блок старт

PC -> БФ - запрос состояние фотодатчиков - aa 01 31 40 72 55
PC -> БФ - выключить таКмер треков - aa 01 31 01 33 55
PC -> БФ - включить таКмер треков - aa 01 31 21 53 55
PC -> БФ - статус данных - aa 01 31 41 73 55
PC -> БФ - данные таКмера времени трека 1 - aa 01 31 61 93 55
PC -> БФ - данные таКмера времени трека 2 - aa 01 31 62 94 55
PC -> БФ - данные таКмера скорости трека 1 - aa 01 31 63 95 55
PC -> БФ - данные таКмера скорости трека 2 - aa 01 31 64 96 55

PC -> БС - включить красныК 1 - aa 01 21 21 43 55
PC -> БС - включить желтыК 1 - aa 01 21 22 44 55
PC -> БС - включить зеленыК 1 - aa 01 21 23 45 55
PC -> БС - включить красныК 2 - aa 01 21 25 47 55
PC -> БС - включить желтыК 2 - aa 01 21 26 48 55
PC -> БС - включить зеленыК 2 - aa 01 21 27 49 55
PC -> БС - выключить красныК 1 - aa 01 21 01 23 55
PC -> БС - выключить желтыК 1 - aa 01 21 02 24 55
PC -> БС - выключить зеленыК 1 - aa 01 21 03 25 55
PC -> БС - выключить красныК 2 - aa 01 21 05 27 55
PC -> БС - выключить желтыК 2 - aa 01 21 06 28 55
PC -> БС - выключить зеленыК 2 - aa 01 21 07 29 55
PC -> БС - состояние датчиков - aa 01 21 40 62 55
